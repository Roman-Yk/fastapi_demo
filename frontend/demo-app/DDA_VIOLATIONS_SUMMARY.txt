DOMAIN-DRIVEN ARCHITECTURE VIOLATIONS - COMPLETE ANALYSIS
==========================================================

TOTAL VIOLATIONS FOUND: 7 Major Issues Across 3 Areas

================================
1. HOOKS VIOLATIONS (2 Files)
================================

VIOLATION 1.1: useReferenceData.ts
  Current Location: /src/hooks/useReferenceData.ts
  Domain: Cross-domain (Drivers, Terminals, Vehicles)
  Status: HIGH PRIORITY
  
  Functions to Move:
  - useDrivers() → /src/domains/drivers/hooks/useDriver.ts
  - useDriver(driverId) → /src/domains/drivers/hooks/useDriver.ts
  - useTerminals() → /src/domains/terminals/hooks/useTerminal.ts
  - useTerminal(terminalId) → /src/domains/terminals/hooks/useTerminal.ts
  - useTrucks() → /src/domains/vehicles/hooks/useVehicles.ts
  - useTruck(truckId) → /src/domains/vehicles/hooks/useVehicles.ts
  - useTrailers() → /src/domains/vehicles/hooks/useVehicles.ts
  - useTrailer(trailerId) → /src/domains/vehicles/hooks/useVehicles.ts
  - useDriversByIds(ids) → /src/domains/drivers/hooks/useDriver.ts
  - useTerminalsByIds(ids) → /src/domains/terminals/hooks/useTerminal.ts
  - useTrucksByIds(ids) → /src/domains/vehicles/hooks/useVehicles.ts
  - useTrailersByIds(ids) → /src/domains/vehicles/hooks/useVehicles.ts

VIOLATION 1.2: useReferenceDataMany.ts
  Current Location: /src/hooks/useReferenceDataMany.ts
  Domain: Orders (grid rendering functionality)
  Status: HIGH PRIORITY
  
  Function to Move:
  - useReferenceDataForGrid(records) → /src/domains/orders/hooks/useReferenceDataForGrid.ts
  - useReferenceDataMany (alias) → /src/domains/orders/hooks/useReferenceDataForGrid.ts

ACCEPTABLE HOOKS (Keep in /src/hooks/):
  ✓ useFormData.ts (generic form management)
  ✓ useFormContext.tsx (generic context provider)
  ✓ useFormValidation.ts (generic validation)
  ✓ useApi.ts (generic API calls)
  ✓ useFilteredData.ts (generic data filtering)

================================
2. UTILITIES VIOLATIONS (2 Files)
================================

VIOLATION 2.1: mockData.ts
  Current Location: /src/utils/mockData.ts
  Domain: Orders
  Status: HIGH PRIORITY
  
  Content to Move:
  - mockOrders[] array → /src/domains/orders/utils/mockData.ts
  - filterOrders() function → /src/domains/orders/utils/mockData.ts
  - getDateRange() helper → /src/domains/orders/utils/mockData.ts
  - Order-specific date/time helpers → /src/domains/orders/utils/mockData.ts
  - OrderFilters type usage → /src/domains/orders/utils/mockData.ts

VIOLATION 2.2: formTransform.ts
  Current Location: /src/utils/formTransform.ts
  Domain: Orders (partial violation)
  Status: MEDIUM PRIORITY
  
  Content to Move (Extract):
  - ORDER_FORM_CONFIG constant → /src/domains/orders/utils/formTransform.ts
  - ORDER_DATE_FIELDS constant → /src/domains/orders/utils/formTransform.ts
  
  Content to Keep (Generic):
  - transformFormData<T>() function → /src/utils/formTransform.ts
  - populateFormFromApi<T>() function → /src/utils/formTransform.ts

ACCEPTABLE UTILS (Keep in /src/utils/):
  ✓ config.ts (shared application configuration)

================================
3. COMPONENTS VIOLATIONS (1 File)
================================

VIOLATION 3.1: AppRoutes.tsx
  Current Location: /src/components/common/AppRoutes.tsx
  Domain: Orders (hardcoded routes)
  Status: MEDIUM PRIORITY
  
  Issue: Routes are hardcoded to only render orders pages
  Current Routes:
  - "/" → OrdersPage
  - "/orders" → Navigate to "/"
  - "/orders/create" → CreateOrderPage
  - "/orders/:orderId/edit" → EditOrderPage
  
  Options for Fix:
  1. Move to /src/pages/AppRoutes.tsx (app-level routing)
  2. Move to /src/domains/orders/pages/AppRoutes.tsx (if orders-only)
  3. Make configurable to support domain registration
  
  Recommendation: Move to /src/pages/AppRoutes.tsx as it's app-level routing

ACCEPTABLE COMPONENTS (Keep in /src/components/common/):
  ✓ DataLoader.tsx (generic loading/error/empty state)
  ✓ ErrorBoundary.tsx (generic error handling)
  ✓ ErrorPage.tsx (generic error page)
  ✓ ActionButton.tsx (generic action button)

================================
4. SERVICES VIOLATIONS (2 Files)
================================

VIOLATION 4.1: apiService.ts
  Current Location: /src/services/apiService.ts
  Domain: Cross-domain (ALL domains)
  Status: HIGH PRIORITY (DEPRECATED)
  
  Action: DELETE THIS FILE
  Reason: Already replaced by domain-specific services
  
  Verify These Exist:
  - /src/domains/orders/api/orderService.ts ✓
  - /src/domains/drivers/api/driverService.ts
  - /src/domains/terminals/api/terminalService.ts
  - /src/domains/vehicles/api/truckService.ts
  - /src/domains/vehicles/api/trailerService.ts
  - /src/domains/orders/api/orderDocumentService.ts ✓

VIOLATION 4.2: apiServices.ts
  Current Location: /src/services/apiServices.ts
  Domain: Cross-domain (re-export layer)
  Status: MEDIUM PRIORITY (DEPRECATE)
  
  Action: Keep for now as backwards compatibility layer
  Note: Update all imports to use domain-specific services
  Eventually: Remove this file after all migrations complete

ACCEPTABLE SERVICES (Keep in /src/services/):
  ✓ baseApiService.ts (generic base class for API services)

================================
5. VALIDATION VIOLATIONS (1 Directory)
================================

VIOLATION 5.1: /src/validation/
  Current Location: /src/validation/ (empty directory)
  Domain: N/A
  Status: LOW PRIORITY
  
  Action: REMOVE empty directory
  Ensure: /src/domains/orders/validation/orderSchema.ts exists ✓

================================
6. TYPES VIOLATIONS
================================

STATUS: NO VIOLATIONS
Reason: No shared /src/types/ directory exists
Each domain maintains its own types in /src/domains/<domain>/types/ ✓

================================
MIGRATION SUMMARY
================================

HIGH PRIORITY (Fix First):
1. Split useReferenceData.ts into domain-specific hooks
2. Move useReferenceDataMany.ts to orders domain
3. Move mockData.ts to orders domain
4. Delete apiService.ts (already replaced)
5. Clean up empty /src/validation/ directory

MEDIUM PRIORITY (Fix Next):
1. Extract ORDER configs from formTransform.ts
2. Move AppRoutes.tsx to /src/pages/

LOW PRIORITY (Nice to Have):
1. Mark apiServices.ts as deprecated
2. Add documentation about domain boundaries
3. Create linting rules to enforce separation

================================
TARGET STRUCTURE AFTER MIGRATION
================================

src/
├── hooks/                          [Shared Only]
│   ├── useApi.ts ✓
│   ├── useFormData.ts ✓
│   ├── useFormContext.tsx ✓
│   ├── useFormValidation.ts ✓
│   ├── useFilteredData.ts ✓
│   └── index.ts
├── utils/                          [Shared Only]
│   ├── config.ts ✓
│   ├── formTransform.ts [generic functions only]
│   └── index.ts
├── components/                     [Shared UI Only]
│   ├── common/
│   │   ├── DataLoader.tsx ✓
│   │   ├── ErrorBoundary.tsx ✓
│   │   ├── ErrorPage.tsx ✓
│   │   ├── ActionButton.tsx ✓
│   │   └── index.ts
│   ├── layout/
│   ├── ui/
│   └── index.ts
├── services/
│   ├── baseApiService.ts ✓
│   └── apiServices.ts [deprecated]
├── domains/
│   ├── orders/
│   │   ├── hooks/
│   │   │   ├── useReferenceDataForGrid.ts [MOVE]
│   │   │   └── index.ts
│   │   ├── utils/
│   │   │   ├── mockData.ts [MOVE]
│   │   │   ├── formTransform.ts [NEW - config only]
│   │   │   └── index.ts
│   │   ├── api/ ✓
│   │   ├── types/ ✓
│   │   ├── components/ ✓
│   │   ├── pages/ ✓
│   │   ├── validation/ ✓
│   │   └── index.ts
│   ├── drivers/
│   │   ├── hooks/
│   │   │   ├── useDriver.ts [MOVE]
│   │   │   └── index.ts
│   │   ├── api/ ✓
│   │   ├── types/ ✓
│   │   └── index.ts
│   ├── terminals/
│   │   ├── hooks/
│   │   │   ├── useTerminal.ts [MOVE]
│   │   │   └── index.ts
│   │   ├── api/ ✓
│   │   ├── types/ ✓
│   │   └── index.ts
│   ├── vehicles/
│   │   ├── hooks/
│   │   │   ├── useVehicles.ts [MOVE]
│   │   │   └── index.ts
│   │   ├── api/ ✓
│   │   ├── types/ ✓
│   │   └── index.ts
└── pages/
    ├── AppRoutes.tsx [MOVE]
    └── index.ts

================================
DETAILED ACTION ITEMS
================================

File: /src/hooks/useReferenceData.ts
Action: SPLIT into 3 files
  1. /src/domains/drivers/hooks/useDriver.ts (8 functions)
  2. /src/domains/terminals/hooks/useTerminal.ts (4 functions)
  3. /src/domains/vehicles/hooks/useVehicles.ts (8 functions)

File: /src/hooks/useReferenceDataMany.ts
Action: MOVE to /src/domains/orders/hooks/useReferenceDataForGrid.ts

File: /src/utils/mockData.ts
Action: MOVE to /src/domains/orders/utils/mockData.ts

File: /src/utils/formTransform.ts
Action: EXTRACT to /src/domains/orders/utils/formTransform.ts
  Keep in shared: transformFormData(), populateFormFromApi()
  Extract to orders: ORDER_FORM_CONFIG, ORDER_DATE_FIELDS

File: /src/services/apiService.ts
Action: DELETE (already replaced by domain services)

File: /src/components/common/AppRoutes.tsx
Action: MOVE to /src/pages/AppRoutes.tsx or /src/pages/Router.tsx

Directory: /src/validation/
Action: REMOVE empty directory

================================
IMPACT ANALYSIS
================================

Breaking Changes: NONE
All changes are internal reorganization with proper imports update

Files to Update After Migration:
1. All imports of useReferenceData* → Update to domain-specific paths
2. All imports of useReferenceDataMany → Update to orders domain path
3. All imports of mockData → Update to orders domain path
4. All imports of ORDER_* constants → Update to orders domain path
5. All imports of AppRoutes → Update to pages path

Estimated Time to Complete: 2-3 hours
Risk Level: LOW (refactoring only, no logic changes)

